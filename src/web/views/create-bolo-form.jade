include includes/mixins
extends layout

//- Template Mixins
mixin input_mx(name, label, placeholder, required, value, type)
  .form-group
    label.control-label(for=name)= label
    input.form-control(name=name type=type?type:text placeholder=placeholder, value=value)

mixin input_textarea(name, label, placeholder, required, value)
  .form-group
    label.control-label(for=name)= label
    textarea.form-control(name=name type="text" placeholder=placeholder)= value

mixin select_options(name, label, options, required, selectedValue)
  .form-group
    label.control-label(for=name)= label
    select.form-control(name=name)
      option() Select an option...
      each val in options
          if selectedValue == val
            +option(val,true)
          else
            +option(val,false)

block jumbo
  .jumbotron
    .container
        if bolo
          h1 Edit BOLO
          p Fill out the form to submit and update an existing bolo
        else
          h1 Create a BOLO
          p Fill out the form and submit to create a new BOLO.

block content
  //- Dropdown Box Selections
  -
    var categories = [
      'ARSON', 'BURGLARY', 'DOMESTIC SECURITY', 'ESCAPE', 'FRAUD',
      'HOME INVASION', 'HOMICIDE', 'MISSING JUVENILE', 'MISSING PERSON',
      'NARCOTICS', 'NEED TO IDENTIFY', 'OFFICER SAFETY', 'PC TO ARREST',
      'ROBBERY', 'RUNAWAY', 'SEX OFFENSE', 'SITUATIONAL AWARENESS',
      'THEFT - AUTO', 'THEFT - BOAT', 'THEFT - GRAND', 'THEFT - PETIT',
      'WANTED', 'FIELD INTERVIEW', 'INFORMATION'
    ]
    var races = [
      'Hispanic', 'White', 'Asian', 'Black or African American',
      'American Indian or Alaska Native',
      'Native Hawaiian or Other Pacific Islander'
    ]
    var hair_colors = [
      'Black','Blonde','Red','Brown','Gray','White','Sandy','Bald (No hair)'
    ]

  //- Actual Form
  form#create-bolo-form(action=bolo?"/bolo/edit/" + bolo.data.id:"/bolo/create" enctype="multipart/form-data" method="post")
    +select_options("bolo_category", "Category", categories, true, bolo?bolo.data.category:"")
    +input_mx("fname", "First Name", "", false, bolo?bolo.data.firstName:"")
    +input_mx("lname", "Last Name", "", false,  bolo?bolo.data.lastName:"")
    +input_mx("dob", "Date of Birth (DD/MM/YYYY)", "DD/MM/YYYY", false, bolo?bolo.data.dob:"")
    +input_mx("dl_number", "Drivers License Number", "", false, bolo?bolo.data.dlNumber:"")
    +select_options("race", "Race", races, false, bolo?bolo.data.race:"")
    +select_options("sex", "Sex", ["Male", "Female"], false, bolo?bolo.data.sex:"")
    +input_mx("height", "Height - Feet-Inches (e.g. 05-09)", "e.g. 05-09", false, bolo?bolo.data.height:"")
    +input_mx("weight", "Weight - Pounds", "", false, bolo?bolo.data.weight:"")
    +select_options("hair_color", "Hair Color", hair_colors, false, bolo?bolo.data.height:"")
    +input_textarea("tattoos", "Tattoos", "", false, bolo?bolo.data.tattoos:"")
    .form-group
      label.control-label(for="image_upload") Image Attachment
      div#form-add-img-group
        input(name="image_upload[]" type="file" accept="image/*")
      a#form-add-img-btn
        span.glyphicon.glyphicon-plus
        | Add Image
    +input_mx("video_url", "Video Link", "", false, bolo?bolo.data.videoLink:"", "url")
    +input_textarea("addition_info", "Additional Info", "", false, bolo?bolo.data.additional:"")
    +input_textarea("summary", "Summary", "", false, bolo?bolo.data.summary:"")
    input(name="id" type="hidden" value=bolo?bolo.data.id:"")
    .form-group
      button.btn.btn-primary(type="submit" value="save") Submit
      button.btn.btn-default(type="submit" disabled=true value="preview") Preview
      button.btn.btn-default(type="submit" disabled=true value="pdf") PDF

  .container
    h2 Attached Images
    if bolo && bolo.data.attachments
        each val,key in bolo.data.attachments
          a(href="/bolo/asset/" + bolo.data.id + "/" + key)= key
